<!DOCTYPE html>
<html lang="en" >
<!--  xmlns:th="http://thymleaf.org" -->
<head>
    <meta charset="UTF-8">
    <title>Person</title>
</head>
<body>

    <p th:text="${'Full Name: ' + person.getName() +
        ' ' + person.getLastName() + ' ' + person.getPatronymic()}">VALUE</p>
    <p th:text="${'Date Birth: ' + person.getDateBirth()}">VALUE</p>
    <p th:text="${'Email: ' + person.getEmail()}">VALUE</p>
    <p th:text="${'Phone: ' + person.getPhone()}">VALUE</p>

    <!--    if person doesn't have books -->
    <div th:if="${books.isEmpty()}">
        <p>Человек пока не взял книги</p>
    </div>

    <!--    if person has books -->
    <div th:if="${!books.isEmpty()}">
        <hr>
        <h4>Книги</h4>
        <div th:each="book : ${books}">
            <p th:text="${book.getName() + ', ' + book.getAuthor() + ', ' + book.getYear()}">book</p>
        </div>
    </div>

    <!--  add new book  -->
    <div th:if="${booksFree.size() != 0}">
        <form action="#" th:method="PATCH" th:action="@{/people/{id}/assign(id=${person.getId()})}">
            <label for="book">Выбрать книгу: </label>
            <select th:object="${book}" th:field="*{id}" id="book">
                <option th:each="book : ${booksFree}" th:value="${book.getId()}" th:text="${book.getName()}"></option>
            </select>
            <input type="submit" value="Назначить книгу">
        </form>
    </div>
    <div th:if="${booksFree.size() == 0}">
        <p>Нет свободных книг</p>
    </div>

    <hr>



    <a th:href="@{/people/{id}/edit(id=${person.getId()})}">Редактировать</a>

    <form th:method="DELETE" th:action="@{/people/{id}(id=${person.getId()})}">
        <input type="submit" value="Удалить"/>
    </form>
</body>
</html>